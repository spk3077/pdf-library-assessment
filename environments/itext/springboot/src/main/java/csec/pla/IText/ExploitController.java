package csec.pla.IText;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStream;

import com.itextpdf.layout.Document;
import com.itextpdf.kernel.geom.PageSize;
import com.itextpdf.kernel.pdf.PdfDocument;
import com.itextpdf.kernel.pdf.PdfPage;
import com.itextpdf.kernel.pdf.PdfWriter;
import com.itextpdf.kernel.pdf.canvas.PdfCanvas;
import com.itextpdf.layout.element.*;

@RestController
public class ExploitController {

	private Document createPDF() throws IOException {
		OutputStream fos = new FileOutputStream(new File("/pdfs/test.pdf"));
		PdfWriter writer = new PdfWriter(fos);
		PdfDocument pdfdoc = new PdfDocument(writer);
		Document doc = new Document(pdfdoc);

		doc.add(new Paragraph("Maximum Memory used by JVM :"));
		List list = new List();
		list.add(new ListItem("File system root: "));
		list.add(new ListItem("File system root: "));
		doc.add(list);

		Table table=new Table(1);
		table.addHeaderCell(new Cell().add(new Paragraph("Caption")));
		table.addCell(new Cell().add(new Paragraph("Available Processors")));
		doc.add(table);
		doc.close();
		writer.close();

		return doc;
	}

	@GetMapping("/")
	public String index() {
		return "Greetings from Spring Boot!";
	}


	@GetMapping("/injection")
	public String injection() {
		try {
			createPDF();
		} catch (IOException e) {
			e.printStackTrace();
		}
		return "PDF File Created!";
	}

	@GetMapping("/buffer")
	public String buffer() {
		return "Greetings from Spring Boot!";
	}

	@GetMapping("/os")
	public String os() {
		return "Greetings from Spring Boot!";
	}

}
